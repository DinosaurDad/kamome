window.Kamome=function(){var n=function(){return navigator.userAgent.toLowerCase().indexOf("android")>0},e=function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("iphone")>0||n.indexOf("ipad")>0||n.indexOf("ipod")>0},i={},o=function(n,e){return n in i||(i[n]=[]),i[n].push(e),this},t=function(n,e){if(n in i)for(var o=i[n].length-1;o>=0;--o)i[n][o]===e&&i[n].splice(o,1);return this},r=function(i,o){var t=JSON.stringify({name:i,data:o});e()?"webkit"in window&&setTimeout(function(){window.webkit.messageHandlers.kamomeSend.postMessage(t)},0):n()&&"kamomeAndroid"in window&&setTimeout(function(){window.kamomeAndroid.send(t)},0)},a=function(n,e){n in i&&i[n].forEach(function(n){n(JSON.parse(e))})};return{addListener:o,removeListener:t,send:r,onReceive:a}}();